<div class="center-column" data-aos="fade-up" *ngIf="!isLoading">
  <mat-card class="padding wide">
    <form [formGroup]="documentRequestForm">
      <mat-card-title>
        <h1>Document Request</h1>
      </mat-card-title>
      <mat-card-content>
        <mat-form-field appearance="outline" class="wide">
          <mat-label>Type</mat-label>
          <mat-select formControlName="documentTypeId" required>
            <mat-option *ngFor="let type of docTypes" [value]="type.id">{{ type.name }}</mat-option>
          </mat-select>
          <mat-icon matSuffix>view_headline</mat-icon>
          <mat-error *ngIf="documentRequestForm.controls['documentTypeId'].hasError('required')">This field cannot be
            empty</mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline" class="wide">
          <mat-label>Description</mat-label>
          <textarea formControlName="description" rows="5" placeholder="Enter your description" matInput
            required></textarea>
          <mat-icon matSuffix>description</mat-icon>
          <mat-error *ngIf="documentRequestForm.controls['description'].hasError('required')">This field cannot be
            empty</mat-error>
        </mat-form-field>
      </mat-card-content>
      <mat-card-actions>
        <button mat-flat-button color="primary" (click)="onDocumentRequest()" type="submit" [disabled]="isLoading">
          {{ isLoading ? "LOADING..." : "SUBMIT" }}
        </button>
      </mat-card-actions>
    </form>
  </mat-card>
  <mat-card class="padding wide">
    <mat-card-title>
      <h1>Your Requested Documents</h1>
    </mat-card-title>
    <mat-card-content *ngIf="docRequests.length >= 0">
      <table mat-table [dataSource]="docRequests" class="mat-elevation-z5">
        <ng-container matColumnDef="docType">
          <th mat-header-cell *matHeaderCellDef>
            Document Type
          </th>
          <td mat-cell *matCellDef="let element">{{ element.documentType.name }}</td>
        </ng-container>
        <ng-container matColumnDef="description">
          <th mat-header-cell *matHeaderCellDef>
            Description
          </th>
          <td mat-cell *matCellDef="let element">{{ element.description }}</td>
        </ng-container>
        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef>
            Status
          </th>
          <td mat-cell *matCellDef="let element">{{ getDocStatus(element) }}</td>
        </ng-container>
        <ng-container matColumnDef="requestDate">
          <th mat-header-cell *matHeaderCellDef>
            Request Date
          </th>
          <td mat-cell *matCellDef="let element">{{ getDocDate(element.startDate) }}</td>
        </ng-container>
        <ng-container matColumnDef="completionDate">
          <th mat-header-cell *matHeaderCellDef>
            Completion Date
          </th>
          <td mat-cell *matCellDef="let element">{{ getDocDate(element.endDate) }}</td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"
          [class.legend-passed]="!row.isPending && !row.isDeclined"
          [class.legend-waiting]="row.isPending && !row.isDeclined" [class.legend-notPassed]="row.isDeclined">
        </tr>
      </table>
    </mat-card-content>
    <mat-card-content *ngIf="docRequests.length === 0">
      <h2>Looks like there are no document requests yet.</h2>
    </mat-card-content>
  </mat-card>
</div>
<app-loader *ngIf="isLoading"></app-loader>